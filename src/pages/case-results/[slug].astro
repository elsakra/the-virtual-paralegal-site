---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Button from '@/components/Button.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const results = await getCollection('case-results');
  return results.map((result) => ({
    params: { slug: result.slug },
    props: { result },
  }));
}

const { result } = Astro.props;
const { Content } = await result.render();
---

<BaseLayout title={result.data.title} description={result.data.outcome} lightHero={true}>
  <section class="pt-32 pb-14 bg-gradient-to-b from-primary-50 to-white">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center gap-2 text-sm text-slate-500 mb-6">
        <a href="/case-results" class="hover:text-primary-600 transition-colors">Case Results</a>
        <span>/</span>
        <span class="text-slate-900">{result.data.practiceArea}</span>
      </div>

      <div class="max-w-3xl">
        <p class="text-primary-700 font-semibold">
          {result.data.practiceArea}
        </p>
        <h1 class="mt-3 font-display text-3xl sm:text-4xl lg:text-5xl font-bold text-slate-900 leading-tight">
          {result.data.title}
        </h1>
        <p class="mt-6 text-xl text-slate-600 leading-relaxed">
          {result.data.outcome}
        </p>
        {result.data.amount && (
          <p class="mt-6 inline-flex items-center px-4 py-2 rounded-full bg-primary-100 text-primary-800 font-semibold">
            {result.data.amount}
          </p>
        )}
      </div>
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="prose prose-slate prose-lg max-w-none prose-headings:font-display prose-headings:text-slate-900">
        <Content />
      </div>
      <p class="mt-10 text-sm text-slate-500">
        Prior results do not guarantee a similar outcome. Details are generalized for confidentiality.
      </p>
    </div>
  </section>

  <section class="py-20 bg-primary-900">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <h2 class="font-display text-3xl sm:text-4xl font-bold text-white">
        Talk to an attorney
      </h2>
      <p class="mt-4 text-xl text-primary-200">
        Request a confidential consultation to understand your options.
      </p>
      <div class="mt-10">
        <Button href="/contact" style="white" size="lg">
          Request a Consultation
        </Button>
      </div>
    </div>
  </section>
</BaseLayout>

